<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For My Dearest Kiddo âœ¨</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Quicksand:wght@300;500;700&family=Caveat:wght@600&display=swap" rel="stylesheet">
    <style>
        :root { --accent: #ff4d6d; --bg-pink: #fff1f2; }
        
        body {
            margin: 0; padding: 0; display: flex; justify-content: center; align-items: center;
            min-height: 100vh; background: radial-gradient(circle, #fff5f7 0%, #ffd1dc 100%);
            font-family: 'Quicksand', sans-serif; overflow: hidden;
        }

        /* Floating Balloon Animation */
        .balloon {
            position: absolute; bottom: -100px; font-size: 30px; 
            animation: floatUp 8s linear infinite; opacity: 0.6; pointer-events: none;
        }
        @keyframes floatUp {
            0% { transform: translateY(0) rotate(0); opacity: 1; }
            100% { transform: translateY(-120vh) rotate(20deg); opacity: 0; }
        }

        /* Card Styling */
        .glass-card {
            background: rgba(255, 255, 255, 0.75); backdrop-filter: blur(20px);
            border: 2px solid white; border-radius: 40px; padding: 40px;
            box-shadow: 0 30px 60px rgba(255, 77, 109, 0.2);
            text-align: center; width: 85%; max-width: 450px;
            animation: cardEntrance 1s ease-out; position: relative; z-index: 10;
        }
        @keyframes cardEntrance { from { opacity: 0; transform: scale(0.7); } to { opacity: 1; transform: scale(1); } }

        h1 { font-family: 'Dancing Script', cursive; color: var(--accent); font-size: 2.8rem; margin: 0; }

        /* Button Logic - Fixed Placement */
        .btn-box { 
            margin-top: 40px; display: flex; justify-content: center; 
            align-items: center; gap: 20px; min-height: 60px;
        }
        .btn { padding: 14px 30px; border-radius: 50px; border: none; font-weight: 700; cursor: pointer; transition: 0.3s; font-size: 1.1rem; }
        
        #yesBtn { background: var(--accent); color: white; box-shadow: 0 10px 20px rgba(255, 77, 109, 0.4); }
        #noBtn { background: white; color: #999; border: 1px solid #ddd; z-index: 100; transition: 0.1s ease; }

        /* Envelope */
        #envelope-stage { display: none; }
        .env-icon { font-size: 110px; cursor: pointer; animation: pulse 2s infinite; display: inline-block; }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }

        /* Expanded Letter Design */
        #final-msg { display: none; background: #fffcf2; padding: 30px; }
        .saranghae { font-family: 'Dancing Script', cursive; font-size: 2.5rem; color: var(--accent); margin: 5px 0; }
        
        .letter-paper {
            font-family: 'Caveat', cursive; font-size: 1.4rem; color: #4b3832;
            line-height: 1.6; text-align: left; padding: 20px;
            background: repeating-linear-gradient(#fffcf2, #fffcf2 31px, #e2d1c3 31px, #e2d1c3 32px);
            border-radius: 10px; margin-top: 15px;
        }

        .input-area {
            margin-top: 25px; background: white; padding: 15px;
            border-radius: 20px; border: 2px solid var(--accent); box-shadow: 0 0 15px rgba(255, 77, 109, 0.2);
        }
        textarea {
            width: 100%; border: none; background: transparent; font-family: 'Quicksand', sans-serif;
            text-align: center; font-weight: 600; outline: none; color: var(--accent); font-size: 1.1rem;
        }

        .screenshot-btn { background: #43e97b; color: white; border: none; padding: 14px; border-radius: 50px; margin-top: 20px; cursor: pointer; font-weight: bold; width: 100%; }
    </style>
</head>
<body>

    <div id="balloons"></div>

    <div id="step1" class="glass-card">
        <h1>For My kiddo.. ðŸŽ€</h1>
        <p style="color: #666; margin-top: 10px;">Will you be my Galentine, shookie?</p>
        <div class="btn-box">
            <button id="yesBtn" class="btn" onclick="startFlow()">Yes, Forever! ðŸ’–</button>
            <button id="noBtn" class="btn" onmouseover="moveNo()" onclick="moveNo()">No</button>
        </div>
    </div>

    <div id="envelope-stage" class="glass-card" onclick="showLetter(event)">
        <div class="env-icon">ðŸ’Œ</div>
        <h2 style="color: var(--accent); font-family: 'Dancing Script';">Cheeku, tap to open!</h2>
        <p style="color: #888;">Ek secret message aapke liye...</p>
    </div>

    <div id="final-msg" class="glass-card">
        <div id="capture-zone">
            <h2 style="color: var(--accent); font-family: 'Dancing Script'; font-size: 2.2rem; margin:0;">Mujhai pata tha Kiddo yes hi kahi gi!</h2>
            <div class="saranghae">Saranghae, Shampy! ðŸ«°âœ¨</div>
            
            <div class="letter-paper">
                Meri sabse pyari <b>Beti, Cheeku, Shampy, Kiddo</b>â€”ab itnai sare naam hai tumhare mai tumhai kis naam sai pukarun. <br>
                Zindagi mein bohot log aaye aur gaye, par tum jaisi koi nhi jo mere rone par mujhe gale lagaye. pata nhi kesai hum dost bangaye or dost nhi woh bhi chota lafz hai .
                Shukriya meri life mein aane ke liye, or hn beti tum rote hue achi nhi lagti plz mat roya karo . mujhsai plz gusa,naraz,hurt mat hona kbhi aesa kadun toh batadena mana ata hai gusa par tumbhi toh socho ata q hai.bas ek cheez yaad rakhna mai karti hun tumhara intezar kbhi mat sochna tumhara haal phouchai bagair mujhai sakoon ajae. I LOVE YOU INFINITY ðŸŒ·ðŸ’–
            </div>

            <div class="input-area">
                <p style="margin: 0 0 8px 0; font-size: 0.85rem; color: #888; font-weight: bold;">Lee ki sabse achi baat batao:</p>
                <textarea id="reply" rows="2" placeholder="Yahan dil se likho..."></textarea>
            </div>
        </div>
        <button class="screenshot-btn" onclick="saveMem()">Save Memory ðŸ“¸</button>
    </div>

    <audio id="bgMusic" loop>
        <source src="10cm  Spring Snow (ë´„ëˆˆ) [Lovely Runner OST Part 8] [RomEng Lyric].mp3" type="audio/mpeg">
    </audio>

    <script>
        // Start balloons immediately
        const bContainer = document.getElementById('balloons');
        const items = ['ðŸŽˆ', 'â¤ï¸', 'ðŸ’–', 'âœ¨', 'ðŸŒ·'];
        setInterval(() => {
            const b = document.createElement('div');
            b.className = 'balloon';
            b.innerHTML = items[Math.floor(Math.random() * items.length)];
            b.style.left = Math.random() * 100 + 'vw';
            b.style.animationDuration = (Math.random() * 3 + 6) + 's';
            bContainer.appendChild(b);
            setTimeout(() => b.remove(), 8000);
        }, 600);

        // No button runaway logic
        function moveNo() {
            const btn = document.getElementById('noBtn');
            btn.style.position = 'fixed'; // Breaks out of the box
            const x = Math.random() * (window.innerWidth - btn.offsetWidth);
            const y = Math.random() * (window.innerHeight - btn.offsetHeight);
            btn.style.left = x + 'px';
            btn.style.top = y + 'px';
        }

        function startFlow() {
            confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
            document.getElementById('bgMusic').play();
            document.getElementById('step1').style.display = 'none';
            document.getElementById('envelope-stage').style.display = 'block';
        }

        function showLetter(e) {
            // Exploding heart effect
            for (let i = 0; i < 15; i++) {
                const h = document.createElement('div');
                h.innerHTML = 'â¤ï¸'; h.style.position = 'fixed';
                h.style.left = e.clientX + 'px'; h.style.top = e.clientY + 'px';
                h.style.pointerEvents = 'none'; h.style.transition = '1s all';
                document.body.appendChild(h);
                setTimeout(() => {
                    h.style.transform = `translate(${(Math.random()-0.5)*300}px, ${(Math.random()-0.5)*300}px) scale(0)`;
                    h.style.opacity = '0';
                }, 10);
                setTimeout(() => h.remove(), 1000);
            }
            setTimeout(() => {
                document.getElementById('envelope-stage').style.display = 'none';
                document.getElementById('final-msg').style.display = 'block';
            }, 600);
        }

        function saveMem() {
            const area = document.getElementById('final-msg');
            const btn = document.querySelector('.screenshot-btn');
            btn.style.visibility = 'hidden';
            html2canvas(area, { backgroundColor: '#fffcf2', scale: 2 }).then(canvas => {
                const link = document.createElement('a');
                link.download = 'Our-Bestie-Forever.png';
                link.href = canvas.toDataURL();
                link.click();
                btn.style.visibility = 'visible';
            });
        }
    </script>
</body>

</html>
